#!/usr/bin/env python

import optparse
from essnmp.poll import *
from essnmp.daemonize import daemonize

def main(argv):
    oparse = optparse.OptionParser()
    oparse.add_option("-d", "--debug", dest="debug", action="store_true",
            default=False)
    oparse.add_option("-f", "--config-file", dest="config_file", default="./espolld.conf")
    oparse.add_option("-p", "--pid-file", dest="pid_file", default="./esspolld.pid")

    (opts, args) = oparse.parse_args(args=argv)

    daemonize(opts.pid_file)

    poller = ESSNMPPollManager(opts, args)
    poller.start_polling()

if __name__ == "__main__":
    main(sys.argv)
